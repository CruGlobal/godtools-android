<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <data>
        <import type="org.cru.godtools.xml.model.BaseKt" />
        <import type="org.cru.godtools.xml.model.PageKt" />
        <import type="org.cru.godtools.xml.model.StylesKt" />

        <variable name="controller" type="org.cru.godtools.tract.ui.controller.PageController" />
        <variable name="page" type="org.cru.godtools.xml.model.Page" />
        <variable name="enableTips" type="Boolean" />
        <variable name="callbacks" type="org.cru.godtools.tract.ui.controller.PageController.Callbacks" />
    </data>

    <RelativeLayout
        android:id="@+id/pageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@{PageKt.getBackgroundColor(page)}">

        <org.cru.godtools.base.tool.widget.SimpleScaledPicassoImageView
            android:id="@+id/background_image"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:adjustViewBounds="true"
            android:cropToPadding="false"
            android:layoutDirection="@{BaseKt.getLayoutDirection(page)}"
            app:gravity="@{PageKt.getBackgroundImageGravity(page)}"
            app:picassoFile="@{page.backgroundImage}"
            app:scaleType="@{PageKt.getBackgroundImageScaleType(page)}"
            app:visibleIf="@{page.backgroundImage != null}" />

        <org.cru.godtools.tract.widget.PageContentLayout
            android:id="@+id/page_content_layout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginTop="?attr/actionBarSize"
            android:layoutDirection="inherit">

            <org.ccci.gto.android.common.widget.HackyNestedScrollView
                android:id="@+id/initial_page_content"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:fillViewport="true"
                android:layoutDirection="@{BaseKt.getLayoutDirection(page)}"
                app:layout_childType="hero">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">

                    <include
                        layout="@layout/tract_page_header"
                        app:header="@{page.header}" />

                    <include
                        android:id="@+id/hero"
                        layout="@layout/tract_page_hero"
                        app:hero="@{page.hero}" />
                </LinearLayout>
            </org.ccci.gto.android.common.widget.HackyNestedScrollView>

            <include
                layout="@layout/tract_page_call_to_action"
                app:callToAction="@{page.callToAction}"
                app:callbacks="@{callbacks}"
                app:controller="@{controller}"
                app:page="@{page}" />
        </org.cru.godtools.tract.widget.PageContentLayout>
    </RelativeLayout>
</layout>
